var s=function(u){const O=d;d=[];const i=u();return d=O,i};function D(u){const O=new M(u);return[O.get.bind(O),O.set.bind(O)]}function p(u){new r(u)}function j(u){const O=new M(null);return new r(()=>{O.set(u(s))}),O.get.bind(O)}var d=[];class r{callback;constructor(u){this.callback=u,this.run()}run(){d.push(this),this.callback(s),d.pop()}}class M{value;deps;constructor(u){this.value=u,this.deps=[]}sub(u){if(!this.deps.includes(u))this.deps.push(u)}pub(){for(let u of this.deps)u.run()}get(){const u=d.at(-1);return u&&this.sub(u),this.value}set(u){if(u!==this.value)this.value=u,this.pub()}}function H(u){return u[o]==="text"}var o=Symbol();function y(u,O,i){return{[o]:u,props:O,children:i}}var B=new Proxy(Object.prototype,{get(u,O){if(O==="text")return(...i)=>y(O,{},i);return(i,...t)=>y(O,i,t)}});var g=function(u,O,i){const t=Array.isArray(i)?i:[i];for(let b of t)if(typeof b==="function")u.addEventListener(O,b);else u.addEventListener(O,b.handler,b.options)},L=function(u,O,i){if(typeof i==="string"||typeof i==="number")u.setAttribute(O,`${i}`);else if(i===!0)u.setAttribute(O,"");else u.removeAttribute(O)},A=function(u){if(u.children.length===0)return document.createTextNode("");const O=u.children.map((t)=>{if(typeof t!=="function")return document.createTextNode(`${t}`);const b=document.createTextNode("");return p(()=>b.replaceData(0,b.length,`${t()}`)),b});if(O.length===1)return O[0];const i=document.createElement("span");return i.append(...O),i};function C(u){if(H(u))return A(u);const O=document.createElement(u[o]);for(let[i,t]of Object.entries(u.props))if(i.startsWith(n))g(O,i.slice(n.length),t);else if(typeof t!=="function")L(O,i,t);else p(()=>{L(O,i,t())});for(let i of u.children)if(typeof i==="object")i&&O.appendChild(C(i));else if(typeof i!=="undefined"&&typeof i!=="boolean")O.appendChild(document.createTextNode(`${i}`));return O}var n="on";export{B as tags,D as signal,C as render,y as h,p as effect,j as derived};
