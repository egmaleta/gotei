function s(){return o.at(-1)}function b(u){o.push(u)}function C(){o.pop()}function d(u){const n=o;o=[];const r=u();return o=n,r}var o=[];class O{callback;constructor(u){this.callback=u,this.run()}run(){b(this),this.callback(),C()}}class A{value;deps;constructor(u){this.value=u,this.deps=[]}sub(u){if(!this.deps.includes(u))this.deps.push(u)}pub(){for(let u of this.deps)u.run()}get(){const u=s();return u&&this.sub(u),this.value}set(u){if(u!==this.value)this.value=u,this.pub()}}function F(u){const n=new A(u);return[n.get.bind(n),n.set.bind(n)]}function p(u){new O(u)}function G(u){const n=new A(null);return new O(()=>{n.set(u())}),n.get.bind(n)}function L(u,n,r){return{tag:u,props:n,children:r}}function Q(u){return{tag:"text",children:u}}var W=new Proxy(Object.prototype,{get(u,n){return function(r,...i){return L(n,r,i)}}});function g(u){return u.tag==="text"}var m=function(u,n,r){const i=Array.isArray(r)?r:[r];for(let H of i)if(typeof H==="function")u.addEventListener(n,H);else u.addEventListener(n,H.handler,H.options)},M=function(u,n,r){if(typeof r==="string"||typeof r==="number")u.setAttribute(n,`${r}`);else if(r===!0)u.setAttribute(n,"");else u.removeAttribute(n)},w=function(u){const{children:n}=u;if(typeof n!=="function")return document.createTextNode(`${n}`);const r=document.createTextNode("");return p(()=>{r.replaceData(0,r.length,`${n()}`)}),r};function y(u){if(g(u))return w(u);const n=document.createElement(u.tag);for(let[r,i]of Object.entries(u.props))if(r.startsWith(T))m(n,r.slice(T.length),i);else if(typeof i!=="function")M(n,r,i);else p(()=>{M(n,r,i())});for(let r of u.children)if(typeof r==="object")r&&n.appendChild(y(r));else if(typeof r!=="undefined"&&typeof r!=="boolean")n.appendChild(document.createTextNode(`${r}`));return n}var T="on";export{Q as text,W as tags,F as signal,y as render,d as peek,L as h,p as effect,G as derived};
