var r=function(u){const O=o;o=[];const i=u();return o=O,i};function D(u){const O=new M(u);return[O.get.bind(O),O.set.bind(O)]}function n(u){new b(u)}function m(u){const O=new M(null);return new b(()=>{O.set(u(r))}),O.get.bind(O)}var o=[];class b{callback;constructor(u){this.callback=u,this.run()}run(){o.push(this),this.callback(r),o.pop()}}class M{value;deps;constructor(u){this.value=u,this.deps=[]}sub(u){if(!this.deps.includes(u))this.deps.push(u)}pub(){for(let u of this.deps)u.run()}get(){const u=o.at(-1);return u&&this.sub(u),this.value}set(u){if(u!==this.value)this.value=u,this.pub()}}function H(u){return u[d]==="text"}var d=Symbol();function y(u,O,i){return{[d]:u,props:O,children:i}}var I=new Proxy(Object.prototype,{get(u,O){return(...i)=>{if(O!=="text"&&i.length>0){const t=i[0];if(typeof t==="object"&&t!==null&&typeof t[d]==="undefined")return y(O,t,i.slice(1))}return y(O,{},i)}}});var C=function(u,O,i){const t=Array.isArray(i)?i:[i];for(let p of t)if(typeof p==="function")u.addEventListener(O,p);else u.addEventListener(O,p.handler,p.options)},L=function(u,O,i){if(typeof i==="string"||typeof i==="number")u.setAttribute(O,`${i}`);else if(i===!0)u.setAttribute(O,"");else u.removeAttribute(O)},j=function(u){if(u.children.length===0)return document.createTextNode("");const O=u.children.map((t)=>{if(typeof t!=="function")return document.createTextNode(`${t}`);const p=document.createTextNode("");return n(()=>p.replaceData(0,p.length,`${t()}`)),p});if(O.length===1)return O[0];const i=document.createElement("span");return i.append(...O),i};function A(u){if(H(u))return j(u);const O=document.createElement(u[d]);for(let[i,t]of Object.entries(u.props))if(i.startsWith(s))C(O,i.slice(s.length),t);else if(typeof t!=="function")L(O,i,t);else n(()=>{L(O,i,t())});for(let i of u.children)if(typeof i==="object")i&&O.appendChild(A(i));else if(typeof i!=="undefined"&&typeof i!=="boolean")O.appendChild(document.createTextNode(`${i}`));return O}var s="on";export{I as tags,D as signal,A as render,y as h,n as effect,m as derived};
