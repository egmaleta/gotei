var y=function(u){const O=b;b=[];const i=u();return b=O,i};function D(u){const O=new o(u),i=(p)=>{if(typeof p==="function")O.set(p(O.get()));else O.set(p)};return[O.get.bind(O),i]}function H(u){new M(u)}function m(u){const O=new o(null);return new M(()=>{O.set(u(y))}),O.get.bind(O)}var b=[];class M{callback;constructor(u){this.callback=u,this.run()}run(){b.push(this),this.callback(y),b.pop()}}class o{value;deps;constructor(u){this.value=u,this.deps=[]}sub(u){if(!this.deps.includes(u))this.deps.push(u)}pub(){for(let u of this.deps)u.run()}get(){const u=b.at(-1);return u&&this.sub(u),this.value}set(u){if(u!==this.value)this.value=u,this.pub()}}function L(u){return u[d]==="text"}var d=Symbol();function s(u,O,i){return{[d]:u,props:O,children:i}}var I=new Proxy(Object.prototype,{get(u,O){return(...i)=>{if(O!=="text"&&i.length>0){const p=i[0];if(typeof p==="object"&&p!==null&&typeof p[d]==="undefined")return s(O,p,i.slice(1))}return s(O,{},i)}}});var n=function(u,O,i){const p=Array.isArray(i)?i:[i];for(let t of p)if(typeof t==="function")u.addEventListener(O,t);else u.addEventListener(O,t.handler,t.options)},C=function(u,O,i){if(typeof i==="string"||typeof i==="number")u.setAttribute(O,`${i}`);else if(i===!0)u.setAttribute(O,"");else u.removeAttribute(O)},j=function(u){if(u.children.length===0)return document.createTextNode("");const O=u.children.map((p)=>{if(typeof p!=="function")return document.createTextNode(`${p}`);const t=document.createTextNode("");return H(()=>t.replaceData(0,t.length,`${p()}`)),t});if(O.length===1)return O[0];const i=document.createElement("span");return i.append(...O),i};function A(u){if(L(u))return j(u);const O=document.createElement(u[d]);for(let[i,p]of Object.entries(u.props))if(i.startsWith(r))n(O,i.slice(r.length),p);else if(typeof p!=="function")C(O,i,p);else H(()=>{C(O,i,p())});for(let i of u.children)if(typeof i==="object")i&&O.appendChild(A(i));else if(typeof i!=="undefined"&&typeof i!=="boolean")O.appendChild(document.createTextNode(`${i}`));return O}var r="on";export{I as tags,D as signal,A as render,s as h,H as effect,m as derived};
