(function(i,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(i=typeof globalThis<"u"?globalThis:i||self,s(i.gotei={}))})(this,function(i){"use strict";var j=Object.defineProperty;var w=(i,s,u)=>s in i?j(i,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):i[s]=u;var r=(i,s,u)=>(w(i,typeof s!="symbol"?s+"":s,u),u);let s=[];function u(n){const e=s;s=[];const t=n();return s=e,t}class f{constructor(e,t){r(this,"callback");r(this,"isUIEffect");this.callback=e,this.isUIEffect=t,this.run()}run(){s.push(this),this.callback(u),s.pop()}}class p{constructor(e){r(this,"value");r(this,"uiDeps",[]);r(this,"deps",[]);this.value=e}sub(e){const t=e.isUIEffect?this.uiDeps:this.deps;!t.includes(e)&&t.push(e)}pub(){for(const e of this.uiDeps)e.run();for(const e of this.deps)e.run()}get(){const e=s.at(-1);return e&&this.sub(e),this.value}set(e){e!==this.value&&(this.value=e,this.pub())}}function y(n){const e=new p(n);return Object.assign(e.get.bind(e),{set:e.set.bind(e),map:t=>e.set(t(e.get()))})}function m(n){new f(n,!1)}function E(n){const e=new p(null);return new f(t=>{e.set(n(t))},!1),e.get.bind(e)}const l=Symbol();function d(n,e,t){return{[l]:n,props:e,children:t}}const g=new Proxy(Object.prototype,{get(n,e){return(...t)=>{if(e!=="text"&&t.length>0){const o=t[0];if(typeof o=="object"&&o!==null&&typeof o[l]>"u")return d(e,o,t.slice(1))}return d(e,{},t)}}}),a="on";function T(n,e,t){const o=Array.isArray(t)?t:[t];for(const c of o)typeof c=="function"?n.addEventListener(e,c):n.addEventListener(e,c.handler,c.options)}function h(n,e,t){typeof t=="string"||typeof t=="number"?n.setAttribute(e,`${t}`):t===!0?n.setAttribute(e,""):n.removeAttribute(e)}function x(n){if(n.children.length===0)return document.createTextNode("");const e=n.children.map(o=>{if(typeof o!="function")return document.createTextNode(`${o}`);const c=document.createTextNode("");return new f(()=>c.replaceData(0,c.length,`${o()}`),!0),c});if(e.length===1)return e[0];const t=document.createElement("span");return t.append(...e),t}function N(n){return n[l]==="text"}function b(n){if(N(n))return x(n);const e=document.createElement(n[l]);for(const[t,o]of Object.entries(n.props))t.startsWith(a)?T(e,t.slice(a.length),o):typeof o!="function"?h(e,t,o):new f(()=>{h(e,t,o())},!0);for(const t of n.children)typeof t=="object"?t&&e.appendChild(b(t)):typeof t<"u"&&typeof t!="boolean"&&e.appendChild(document.createTextNode(`${t}`));return e}i.computed=E,i.effect=m,i.h=d,i.render=b,i.signal=y,i.tags=g,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
