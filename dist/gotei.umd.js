(function(i,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(i=typeof globalThis<"u"?globalThis:i||self,s(i.gotei={}))})(this,function(i){"use strict";var j=Object.defineProperty;var A=(i,s,r)=>s in i?j(i,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[s]=r;var f=(i,s,r)=>(A(i,typeof s!="symbol"?s+"":s,r),r);let s=[];function r(n){const e=s;s=[];const t=n();return s=e,t}class p{constructor(e){f(this,"callback");this.callback=e,this.run()}run(){s.push(this),this.callback(r),s.pop()}}class a{constructor(e){f(this,"value");f(this,"deps");this.value=e,this.deps=[]}sub(e){this.deps.includes(e)||this.deps.push(e)}pub(){for(const e of this.deps)e.run()}get(){const e=s.at(-1);return e&&this.sub(e),this.value}set(e){e!==this.value&&(this.value=e,this.pub())}}function m(n){const e=new a(n);return Object.assign(e.get.bind(e),{set:e.set.bind(e),map:t=>e.set(t(e.get()))})}function d(n){new p(n)}function g(n){const e=new a(null);return new p(t=>{e.set(n(t))}),e.get.bind(e)}const u=Symbol();function l(n,e,t){return{[u]:n,props:e,children:t}}const E=new Proxy(Object.prototype,{get(n,e){return(...t)=>{if(e!=="text"&&t.length>0){const o=t[0];if(typeof o=="object"&&o!==null&&typeof o[u]>"u")return l(e,o,t.slice(1))}return l(e,{},t)}}}),h="on";function T(n,e,t){const o=Array.isArray(t)?t:[t];for(const c of o)typeof c=="function"?n.addEventListener(e,c):n.addEventListener(e,c.handler,c.options)}function b(n,e,t){typeof t=="string"||typeof t=="number"?n.setAttribute(e,`${t}`):t===!0?n.setAttribute(e,""):n.removeAttribute(e)}function x(n){if(n.children.length===0)return document.createTextNode("");const e=n.children.map(o=>{if(typeof o!="function")return document.createTextNode(`${o}`);const c=document.createTextNode("");return d(()=>c.replaceData(0,c.length,`${o()}`)),c});if(e.length===1)return e[0];const t=document.createElement("span");return t.append(...e),t}function N(n){return n[u]==="text"}function y(n){if(N(n))return x(n);const e=document.createElement(n[u]);for(const[t,o]of Object.entries(n.props))t.startsWith(h)?T(e,t.slice(h.length),o):typeof o!="function"?b(e,t,o):d(()=>{b(e,t,o())});for(const t of n.children)typeof t=="object"?t&&e.appendChild(y(t)):typeof t<"u"&&typeof t!="boolean"&&e.appendChild(document.createTextNode(`${t}`));return e}i.computed=g,i.effect=d,i.h=l,i.render=y,i.signal=m,i.tags=E,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
