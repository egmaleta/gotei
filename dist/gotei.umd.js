(function(s,i){typeof exports=="object"&&typeof module<"u"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(s=typeof globalThis<"u"?globalThis:s||self,i(s.gotei={}))})(this,function(s){"use strict";var N=Object.defineProperty;var S=(s,i,c)=>i in s?N(s,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[i]=c;var f=(s,i,c)=>(S(s,typeof i!="symbol"?i+"":i,c),c);let i=[];function c(n){const e=i;i=[];const t=n();return i=e,t}class p{constructor(e){f(this,"callback");this.callback=e,this.run()}run(){i.push(this),this.callback(c),i.pop()}}class a{constructor(e){f(this,"value");f(this,"deps");this.value=e,this.deps=[]}sub(e){this.deps.includes(e)||this.deps.push(e)}pub(){for(const e of this.deps)e.run()}get(){const e=i.at(-1);return e&&this.sub(e),this.value}set(e){e!==this.value&&(this.value=e,this.pub())}}function T(n){const e=new a(n);return Object.assign(e.get.bind(e),{set:e.set.bind(e),map:t=>e.set(t(e.get()))})}function d(n){new p(n)}function m(n){const e=new a(null);return new p(t=>{e.set(n(t))}),e.get.bind(e)}const u=Symbol();function E(n){return n[u]==="text"}function l(n,e,t){return{[u]:n,props:e,children:t}}const g=new Proxy(Object.prototype,{get(n,e){return(...t)=>{if(e!=="text"&&t.length>0){const o=t[0];if(typeof o=="object"&&o!==null&&typeof o[u]>"u")return l(e,o,t.slice(1))}return l(e,{},t)}}}),h="on";function A(n,e,t){const o=Array.isArray(t)?t:[t];for(const r of o)typeof r=="function"?n.addEventListener(e,r):n.addEventListener(e,r.handler,r.options)}function b(n,e,t){typeof t=="string"||typeof t=="number"?n.setAttribute(e,`${t}`):t===!0?n.setAttribute(e,""):n.removeAttribute(e)}function x(n){if(n.children.length===0)return document.createTextNode("");const e=n.children.map(o=>{if(typeof o!="function")return document.createTextNode(`${o}`);const r=document.createTextNode("");return d(()=>r.replaceData(0,r.length,`${o()}`)),r});if(e.length===1)return e[0];const t=document.createElement("span");return t.append(...e),t}function y(n){if(E(n))return x(n);const e=document.createElement(n[u]);for(const[t,o]of Object.entries(n.props))t.startsWith(h)?A(e,t.slice(h.length),o):typeof o!="function"?b(e,t,o):d(()=>{b(e,t,o())});for(const t of n.children)typeof t=="object"?t&&e.appendChild(y(t)):typeof t<"u"&&typeof t!="boolean"&&e.appendChild(document.createTextNode(`${t}`));return e}s.TAGS=g,s.derived=m,s.effect=d,s.h=l,s.render=y,s.signal=T,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
