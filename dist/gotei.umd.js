(function(o,i){typeof exports=="object"&&typeof module<"u"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(o=typeof globalThis<"u"?globalThis:o||self,i(o.gotei={}))})(this,function(o){"use strict";var N=Object.defineProperty;var S=(o,i,r)=>i in o?N(o,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[i]=r;var f=(o,i,r)=>(S(o,typeof i!="symbol"?i+"":i,r),r);let i=[];function r(n){const e=i;i=[];const t=n();return i=e,t}class p{constructor(e){f(this,"callback");this.callback=e,this.run()}run(){i.push(this),this.callback(r),i.pop()}}class a{constructor(e){f(this,"value");f(this,"deps");this.value=e,this.deps=[]}sub(e){this.deps.includes(e)||this.deps.push(e)}pub(){for(const e of this.deps)e.run()}get(){const e=i.at(-1);return e&&this.sub(e),this.value}set(e){e!==this.value&&(this.value=e,this.pub())}}function T(n){const e=new a(n);return Object.assign(e.get.bind(e),{set:e.set.bind(e),map:t=>e.set(t(e.get()))})}function d(n){new p(n)}function m(n){const e=new a(null);return new p(t=>{e.set(n(t))}),e.get.bind(e)}const u=Symbol();function E(n){return n[u]==="text"}function l(n,e,t){return{[u]:n,props:e,children:t}}const g=new Proxy(Object.prototype,{get(n,e){return(...t)=>{if(e!=="text"&&t.length>0){const s=t[0];if(typeof s=="object"&&s!==null&&typeof s[u]>"u")return l(e,s,t.slice(1))}return l(e,{},t)}}}),h="on";function A(n,e,t){const s=Array.isArray(t)?t:[t];for(const c of s)typeof c=="function"?n.addEventListener(e,c):n.addEventListener(e,c.handler,c.options)}function b(n,e,t){typeof t=="string"||typeof t=="number"?n.setAttribute(e,`${t}`):t===!0?n.setAttribute(e,""):n.removeAttribute(e)}function x(n){if(n.children.length===0)return document.createTextNode("");const e=n.children.map(s=>{if(typeof s!="function")return document.createTextNode(`${s}`);const c=document.createTextNode("");return d(()=>c.replaceData(0,c.length,`${s()}`)),c});if(e.length===1)return e[0];const t=document.createElement("span");return t.append(...e),t}function y(n){if(E(n))return x(n);const e=document.createElement(n[u]);for(const[t,s]of Object.entries(n.props))t.startsWith(h)?A(e,t.slice(h.length),s):typeof s!="function"?b(e,t,s):d(()=>{b(e,t,s())});for(const t of n.children)typeof t=="object"?t&&e.appendChild(y(t)):typeof t<"u"&&typeof t!="boolean"&&e.appendChild(document.createTextNode(`${t}`));return e}o.TAGS=g,o.computed=m,o.effect=d,o.h=l,o.render=y,o.signal=T,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
